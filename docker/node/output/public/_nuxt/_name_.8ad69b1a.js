import{_ as v,a as B}from"./layout.9bb81d54.js";import{_ as $}from"./PostList.vue.fde46a2a.js";import{a as I,E as N,G as V,k as D,m as R,f as S,A as m,B as q,o as c,c as z,w as p,p as y,u as e,l as g,h as d,C as A,D as E}from"./entry.5c70c2cd.js";const M={class:"w-full",style:{"min-height":"590px"}},P={class:"text-center mt-4"},U={key:1,class:"text-slate-600"},J=I({__name:"[name]",async setup(F){let r,i;const f=N(),{categorysMap:x}=f,h=V(),b=E(),s=h.params.name,L=x.get(s).id;D({title:`分类 ${s}`});const k=R("categoryImg"),w=S(()=>t.postList.length!==t.total),t=m({postList:[],total:0}),o=m({current:0,size:10});async function _(){o.current=o.current+1;const{data:l}=await A(`/category/${L}/post/list`,{baseURL:b.public.baseUrl,query:{...o}},"$Iy4wrVyzbV"),u=l.value,{total:a,list:n}=u.data;t.total=a,t.postList=[...t.postList,...n]}return[r,i]=q(()=>_()),await r,i(),(l,u)=>{const a=B,n=$,C=v;return c(),z(C,null,{banner:p(()=>[y(a,{"main-text":`分类 - ${e(s)}`,"cover-img":e(k),"sub-text":`总共 ${e(t).total} 篇文章`},null,8,["main-text","cover-img","sub-text"])]),content:p(()=>[g("div",M,[y(n,{"post-list":e(t).postList},null,8,["post-list"]),g("div",P,[e(w)?(c(),d("button",{key:0,class:"primary-btn",onClick:_}," 加载更多 ")):(c(),d("span",U,"已经到底了..."))])])]),_:1})}}});export{J as default};
